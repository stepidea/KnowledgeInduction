# 计算机组成原理（Computer Organization）

## 01 冯·诺伊曼体系结构

冯·诺依曼体系结构（Von Neumann architecture），也叫**存储程序**计算机。是“可编程”计算机和“存储”计算机。可阅读文档：[First Draft of a Report on the EDVAC](https://en.wikipedia.org/wiki/First_Draft_of_a_Report_on_the_EDVA)

计算机基本硬件组成：CPU、内存、主板（Motherboard）、电源、I/O 设备、显卡（Graphics Card）。

**任何一台计算机的任何一个部件都可以归到运算器、控制器、存储器、输入设备和输出设备中，而所有的现代计算机也都是基于这个基础架构来设计开发的。**

1. 一个包含算术逻辑单元（Arithmetic Logic Unit，ALU）和处理器寄存器（Processor Register）的**处理器单元**（Processing Unit），用来完成各种算术和逻辑运算。

2. 一个包含指令寄存器（Instruction Register）和程序计数器（Program Counter）的**控制器单元**（Control Unit/CU），用来控制程序的流程，通常就是不同条件下的分支和跳转。

3. 用来存储数据（Data）和指令（Instruction）的**内存**（memory），以及更大容量的外部存储，在过去，可能是磁带、磁鼓这样的设备，现在通常就是硬盘。

4. 各种**输入和输出设备**（I/O），以及对应的输入和输出机制。

------

由算术逻辑单元和控制器单元组成**中央处理器CPU**（Central Processing Unit），所有的**计算机程序**，也都可以抽象为从**输入设备**读取输入信息，通过**运算器**和**控制器**来执行存储在**存储器**里的程序，最终把结果输出到**输出设备**中。

## 02 计算机组成原理知识地图

计算机组成原理的知识点可分成了四大部分：**计算机的基本组成、计算机的指令和计算、处理器设计，以及存储器和 I/O 设备**。

![知识地图（from https://time.geekbang.org/column/article/92378）](https://raw.githubusercontent.com/stepidea/KnowledgeInduction/0df6f24ad11c5f000c7c0a8be1f8944b6e769914/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image/computer_organization.png)

- 注：若图片无法显示一般是dns被污染（存放github图片素材的raw.githubusercontent.com站点），可修改hosts文件，增加节点：

  199.232.68.133 raw.githubusercontent.com
  199.232.68.133 githubusercontent.com

## 03 通过CPU主频谈计算机性能（时间的倒数）

**用于衡量计算机系统的指标**。第一个是**响应时间**（Response time）或者叫**执行时间**（Execution time），提升响应时间可以理解为让计算机“跑得更快”；第二个是**吞吐率**（Throughput）或者**带宽**（Bandwidth），提高吞吐率可以理解为让计算机“搬得更多”。

- *响应时间指执行一个程序，到底需要花多少时间。*

- *吞吐率是指在一定的时间范围内，到底能处理多少事情。*

所以我们一般把计算机性能，定义成响应时间的倒数，也就是：**性能 = 1/ 响应时间**；即响应时间越短，性能的数值就越大。（SPEC（Standard Performance Evaluation Corporation）标准性能评估公司 ）

计算机的计时单位：**CPU 时钟**

Linux下运行 time seq 1000000 | wc -l 命令。返回的第一个是 real time，也就是运行程序整个过程中流逝掉的时间（Wall Clock Time）；第二个是 user time，是 CPU 在运行你的程序，**在用户态运行指令的时间**；第三个是 sys time，是 CPU 在运行你的程序，**在操作系统内核里运行指令的时间**。而<u>程序实际花费的 CPU 执行时间（CPU Time），就是 user time 加上 sys time。</u>

同一台计算机上，响应时间会受到CPU（可能满载运行也可能降频运行）、主板、内存这些其他相关硬件的影响；所以**程序的 CPU 执行时间变成 CPU 时钟周期数（CPU Cycles）和 时钟周期时间（Clock Cycle）的乘积**。

​	**程序的 CPU 执行时间 =CPU 时钟周期数×时钟周期时间**

CPU 时钟周期数，我们可以再做一个分解，把它变成“指令数（不同的指令需要的 Cycles 是不同的）×每条指令的平均时钟周期数（Cycles Per Instruction，简称 CPI）”。

​	**程序的 CPU 执行时间 = 指令数×CPI×Clock Cycle Time**

1. *时钟周期时间，就是计算机主频，这个取决于计算机硬件。*
2. *每条指令的平均时钟周期数 CPI，就是一条指令到底需要多少 CPU Cycle。*
3. *指令数，代表执行我们的程序到底需要多少条指令、用哪些指令。*

## 10 动态链接

程序连接

